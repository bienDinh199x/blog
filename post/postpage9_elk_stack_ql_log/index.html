<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>TÃŒM HIá»‚U Vá»€ ELK STACK â€“ CÃ”NG Cá»¤ QUáº¢N LÃ LOG Táº¬P CHUNG! :: Hello Friend! â€” I am Bee!</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Log (Logging) lÃ  gÃ¬? Hiá»ƒu Ä‘Æ¡n giáº£n chÃ­nh lÃ  má»™t quáº¥n nháº­t kÃ­ hÃ ng ngÃ y cá»§a má»™t há»‡ thá»‘ng. Log ghi láº¡i toÃ n bá»™ quÃ¡ trÃ¬nh cháº¡y, giÃºp dev cÃ³ thá»ƒ tÃ¬m ra nguyÃªn nhÃ¢n Ä‘á»ƒ kháº¯c phá»¥c lá»—i mÃ  dev gáº¯n thÃªm service log vÃ o server Ä‘á»ƒ theo dÃµi CPU vÃ  Ram cá»§a há»‡ thá»‘ng. Khi há»‡ thá»‘ng Ä‘ang cháº¡y, chÃºng ta khÃ´ng thá»ƒ debug Ä‘á»ƒ tÃ¬m lá»—i Ä‘uá»£c."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://biendinh199x.github.io/blog/post/postpage9_elk_stack_ql_log/" />


<link rel="stylesheet" href="https://biendinh199x.github.io/blog/assets/style.css">


<link rel="stylesheet" href="https://biendinh199x.github.io/blog/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://biendinh199x.github.io/blog/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="https://biendinh199x.github.io/blog/img/favicon.png">


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="TÃŒM HIá»‚U Vá»€ ELK STACK â€“ CÃ”NG Cá»¤ QUáº¢N LÃ LOG Táº¬P CHUNG! :: Hello Friend! â€” I am Bee!" />
<meta name="twitter:description" content="Log (Logging) lÃ  gÃ¬? Hiá»ƒu Ä‘Æ¡n giáº£n chÃ­nh lÃ  má»™t quáº¥n nháº­t kÃ­ hÃ ng ngÃ y cá»§a má»™t há»‡ thá»‘ng. Log ghi láº¡i toÃ n bá»™ quÃ¡ trÃ¬nh cháº¡y, giÃºp dev cÃ³ thá»ƒ tÃ¬m ra nguyÃªn nhÃ¢n Ä‘á»ƒ kháº¯c phá»¥c lá»—i mÃ  dev gáº¯n thÃªm service log vÃ o server Ä‘á»ƒ theo dÃµi CPU vÃ  Ram cá»§a há»‡ thá»‘ng. Khi há»‡ thá»‘ng Ä‘ang cháº¡y, chÃºng ta khÃ´ng thá»ƒ debug Ä‘á»ƒ tÃ¬m lá»—i Ä‘uá»£c." />
<meta name="twitter:site" content="https://biendinh199x.github.io/blog/" />
<meta name="twitter:creator" content="map[name: Bee]" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="TÃŒM HIá»‚U Vá»€ ELK STACK â€“ CÃ”NG Cá»¤ QUáº¢N LÃ LOG Táº¬P CHUNG! :: Hello Friend! â€” I am Bee!">
<meta property="og:description" content="Log (Logging) lÃ  gÃ¬? Hiá»ƒu Ä‘Æ¡n giáº£n chÃ­nh lÃ  má»™t quáº¥n nháº­t kÃ­ hÃ ng ngÃ y cá»§a má»™t há»‡ thá»‘ng. Log ghi láº¡i toÃ n bá»™ quÃ¡ trÃ¬nh cháº¡y, giÃºp dev cÃ³ thá»ƒ tÃ¬m ra nguyÃªn nhÃ¢n Ä‘á»ƒ kháº¯c phá»¥c lá»—i mÃ  dev gáº¯n thÃªm service log vÃ o server Ä‘á»ƒ theo dÃµi CPU vÃ  Ram cá»§a há»‡ thá»‘ng. Khi há»‡ thá»‘ng Ä‘ang cháº¡y, chÃºng ta khÃ´ng thá»ƒ debug Ä‘á»ƒ tÃ¬m lá»—i Ä‘uá»£c." />
<meta property="og:url" content="https://biendinh199x.github.io/blog/post/postpage9_elk_stack_ql_log/" />
<meta property="og:site_name" content="TÃŒM HIá»‚U Vá»€ ELK STACK â€“ CÃ”NG Cá»¤ QUáº¢N LÃ LOG Táº¬P CHUNG!" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2019-04-18 00:00:00 &#43;0000 UTC" />







</head>
<body class="">
<div class="container">
  <header class="header">
  <span class="header__inner">
    <a href="https://biendinh199x.github.io/blog/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">hello friend! i am bee!</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="https://biendinh199x.github.io/blog/about/">About</a></li>
        
      
        
          <li><a href="https://biendinh199x.github.io/blog/showcase/">Showcase</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="https://biendinh199x.github.io/blog/about/">About</a></li>
      
    
      
        <li><a href="https://biendinh199x.github.io/blog/showcase/">Showcase</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-137251679-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
 
</header>


  <div class="content">
    
  <div class="post">
    <h2 class="post-title"><a href="https://biendinh199x.github.io/blog/post/postpage9_elk_stack_ql_log/">TÃŒM HIá»‚U Vá»€ ELK STACK â€“ CÃ”NG Cá»¤ QUáº¢N LÃ LOG Táº¬P CHUNG!</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2019-04-18
        </span>
      
      <span class="post-author">â€” Written by map[name: Bee]</span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="https://biendinh199x.github.io/blog/tags/logs">Logs</a>&nbsp;
        
          #<a href="https://biendinh199x.github.io/blog/tags/development">development</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      

<h3 id="log-logging-lÃ -gÃ¬">Log (Logging) lÃ  gÃ¬?</h3>

<p>Hiá»ƒu Ä‘Æ¡n giáº£n chÃ­nh lÃ  má»™t quáº¥n nháº­t kÃ­ hÃ ng ngÃ y cá»§a má»™t há»‡ thá»‘ng. Log ghi láº¡i toÃ n bá»™ quÃ¡ trÃ¬nh cháº¡y, giÃºp dev cÃ³ thá»ƒ tÃ¬m ra nguyÃªn nhÃ¢n Ä‘á»ƒ kháº¯c phá»¥c lá»—i mÃ  dev gáº¯n thÃªm service log vÃ o server Ä‘á»ƒ theo dÃµi CPU vÃ  Ram cá»§a há»‡ thá»‘ng. Khi há»‡ thá»‘ng Ä‘ang cháº¡y, chÃºng ta khÃ´ng thá»ƒ debug Ä‘á»ƒ tÃ¬m lá»—i Ä‘uá»£c. Nhá» cÃ³ logging, ta biáº¿t Ä‘uá»£c há»‡ thá»‘ng cháº¡y ra sao, dÃ¹ng bao nhiÃªu tÃ i nguyÃªn, cÃ³ nhá»¯ng lá»—i gÃ¬ Ä‘Ã£ xáº£y ra trong quÃ¡ khá»©.</p>

<p><img src="https://o7planning.org/vi/10151/cache/images/i/10439.png" alt="ELK" /></p>

<p>Khi há»‡ thá»‘ng cÃ³ váº¥n Ä‘á», log lÃ  thá»© chÃºng ta xem Ä‘áº§u tiÃªn. Nhá» cÃ³ log ta má»›i cÃ³ thá»ƒ biáº¿t chuyá»‡n gÃ¬ Ä‘Ã£ xáº£y ra, tÃ¬m huá»›ng giáº£i quyáº¿t. Log giÃºp báº¡n cÃ³ Ä‘áº§y Ä‘á»§ thÃ´ng tin vá» há»‡ thá»‘ng :</p>

<pre><code>* Pháº£i cÃ³ thá»i gian log Ä‘uá»£c ghi
* Log pháº£i Ä‘i kÃ¨m vá»›i level: info, warn, error
* Pháº£i cÃ³ format cá»¥ thá»ƒ Ä‘á»ƒ sau nÃ y ta parse vÃ  xá»­ lÃ½ dá»± liá»‡u tá»« log.
* Pháº£i ghi log vÃ o file Ä‘á»ƒ dá»… xem láº¡i, khi file lá»›n quÃ¡ thÃ¬ pháº£i xoÃ¡ bá»›t.
* KhÃ´ng gÃ¢y áº£nh huá»Ÿng nhiá»u Ä‘áº¿n performance, khÃ´ng lÃ m cháº­m há»‡ thá»‘ng.
* Pháº£i cho phÃ©p config, cÃ i Ä‘áº·t thÃ´ng qua code, qua file XML hoáº·c JSON.
</code></pre>

<p>HÃ´m nay, mÃ¬nh sáº½ giá»›i thiá»‡u vá» ELK Stack, má»™t trong cÃ¡c stack máº¡nh máº½, phá»• biáº¿n nháº¥t dÃ¹ng Ä‘á»ƒ ghi log nhÃ©!</p>

<p>Ráº¥t nhiá»u há»‡ thá»‘ng lá»›n trÃªn tháº¿ giá»›i (LinkedIn, Netflix, Medium) Ä‘á»u sá»­ dá»¥ng stack nÃ y Ä‘áº¥y!</p>

<p><img src="https://media.giphy.com/media/l1LbXLcLdGJ4KM0EM/giphy.gif" alt="ELK" /></p>

<h3 id="elk-stack-lÃ -gÃ¬">ELK Stack lÃ  gÃ¬?</h3>

<h4 id="stack-hay-cÃ²n-gá»i-lÃ -technical-stack-lÃ -khá»‰-gÃ¬">Stack hay cÃ²n gá»i lÃ  Technical Stack lÃ  khá»‰ gÃ¬?</h4>

<p>Äá»ƒ lÃ m ra má»™t á»©ng dá»¥ng hoÃ n chá»‰nh, chá»‰ viáº¿t code khÃ´ng thÃ´i lÃ  khÃ´ng Ä‘á»§. Khi cáº§n lÆ°u trá»¯ thÃ´ng tin, ta pháº£i Ä‘Æ°a chÃºng vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u. Sau khi Ä‘Ã£ hoÃ n thÃ nh pháº§n code, ta pháº£i tÃ¬m cÃ¡ch deploy nÃ³, tá»©c lÃ  Ä‘Æ°a code lÃªn má»™t chá»— nÃ o Ä‘Ã³ Ä‘á»ƒ cháº¡y code.</p>

<p>Má»™t chÆ°Æ¡ng trÃ¬nh hoÃ n thiá»‡n khÃ´ng chá»‰ cÃ³ code, mÃ  cÃ²n pháº£i cÃ³ ná»n táº£ng há»‡ Ä‘iá»u hÃ nh vÃ  nhá»¯ng pháº§n má»m Ä‘i kÃ¨m (web server, cÆ¡ sá»Ÿ dá»¯ liá»‡u). NgÆ°á»i ta gom nhá»¯ng thá»© nÃ y láº¡i vá»›i nhau (giá»‘ng nhÆ° rÃ¡p Lego áº¥y), táº¡o thÃ nh technical stack.</p>

<p>Technical Stack, cÃ²n gá»i lÃ  solution stack, lÃ  má»™t táº­p há»£p nhá»¯ng pháº§n má»m/cÃ´ng nghá»‡ phá»‘i há»£p chung vá»›i nhau, táº¡o thÃ nh má»™t ná»n táº£ng Ä‘á»ƒ á»©ng dá»¥ng cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c.</p>

<h4 id="cáº¥u-táº¡o-cá»§a-stack-ra-sao">Cáº¥u táº¡o cá»§a Stack ra sao?</h4>

<p>Má»™t stack thÆ°á»ng Ä‘Æ°á»£c cáº¥u táº¡o bá»Ÿi cÃ¡c thÃ nh pháº§n:</p>

<ul>
<li>Há»‡ Ä‘iá»u hÃ nh<br /></li>
<li>Web Server<br /></li>
<li>Database Server<br /></li>
<li>Back-end Programming Language<br />
<br /></li>
</ul>

<p>Giáº£ sá»­ vá»›i LAMP Stack, cÃ¡c thÃ nh pháº§n nÃ y sáº½ láº§n lÆ°á»£t lÃ :</p>

<ul>
<li>Linux<br /></li>
<li>Apache<br /></li>
<li>MySQL hoáº·c  MariaDB<br /></li>
<li>PHP hoáº·c Python<br />
<br /></li>
</ul>

<p>Má»—i thÃ nh pháº§n trong stack Ä‘áº£m nháº­n má»™t nhiá»‡m vá»¥ riÃªng biá»‡t.</p>

<p><img src="https://toidicodedao.files.wordpress.com/2017/05/software-stack-reworked.png" alt="ELK" /><em>ÄÃ¢y lÃ  cÃ¡ch cÃ¡c thÃ nh pháº§n trong stack hoáº¡t Ä‘á»™ng</em></p>

<p>Giáº£ sá»­ vá»›i LAMP stack, mÃ¡y chá»§ sáº½ cháº¡y há»‡ Ä‘iá»u hÃ nh Linux, cÃ i server Apache Tomcat. Khi cÃ³ request tá»« ngÆ°á»i dÃ¹ng, server sáº½ gá»i code PHP, code nÃ y Ä‘á»c dá»¯ liá»‡u tá»« cÆ¡ sá»Ÿ dá»¯ liá»‡u MySQL, render ra HTML vá» phÃ­a ngÆ°á»i dÃ¹ng.</p>

<p>ThÃ´ng thÆ°á»ng, vá»›i cÃ¡c host trÃªn máº¡ng (somee, hawkhost, digital ocean) há» cung cáº¥p sáºµn toÃ n bá»™ stack (os, web server vÃ  database), cÃ¡c báº¡n chá»‰ viá»‡c up code lÃªn vÃ  cháº¡y thÃ´i.</p>

<p>Náº¿u muá»‘n tÃ¬m hiá»ƒu cÃ¡ch stack hoáº¡t Ä‘á»™ng, cÃ¡c báº¡n hÃ£y thá»­ kiáº¿m má»™t con VPS cháº¡y Linux, sau Ä‘Ã³ tá»± cÃ i Ä‘áº·t cÃ¡c pháº§n má»m cáº§n thiáº¿t. ThÃº vá»‹ láº¯m Ä‘áº¥y ğŸ˜„.</p>

<h4 id="okei-cÅ©ng-khÃ¡-miÃªn-man-vÃ o-váº¥n-Ä‘á»-chÃ­nh-nhá»‰">Okei ! CÅ©ng khÃ¡ miÃªn man! VÃ o váº¥n Ä‘á» chÃ­nh nhá»‰!</h4>

<p>ELK Stack lÃ  táº­p há»£p 3 pháº§n má»m Ä‘i chung vá»›i nhau, phá»¥c vá»¥ cho cÃ´ng viá»‡c logging. Ba pháº§n má»m nÃ y láº§n lÆ°á»£t lÃ :</p>

<p>Elasticsearch: CÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»ƒ lÆ°u trá»¯, tÃ¬m kiáº¿m vÃ  query log<br />
Logstash: Tiáº¿p nháº­n log tá»« nhiá»u nguá»“n, sau Ä‘Ã³ xá»­ lÃ½ log vÃ  ghi dá»¯ liá»‡u vÃ  Elasticsearch<br />
Kibana: Giao diá»‡n Ä‘á»ƒ quáº£n lÃ½, thá»‘ng kÃª log. Äá»c thÃ´ng tin tá»« Elasticsearch<br />
CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng cá»§a ELK Stack cÅ©ng khÃ¡ Ä‘Æ¡n giáº£n, cÃ¡c báº¡n xem hÃ¬nh sáº½ hiá»ƒu:<br />
<img src="https://toidicodedao.files.wordpress.com/2018/02/12.png" alt="ELK" /><em>ELK Stack</em></p>

<ol>
<li>Äáº§u tiÃªn, log sáº½ Ä‘Æ°á»£c Ä‘Æ°a Ä‘áº¿n Logstash. (ThÃ´ng qua nhiá»u con Ä‘Æ°á»ng, vÃ­ dá»¥ nhÆ° server gá»­i UDP request chá»©a log tá»›i URL cá»§a Logstash, hoáº·c Beat Ä‘á»c file log vÃ  gá»­i lÃªn Logstash)<br /></li>
<li>Logstash sáº½ Ä‘á»c nhá»¯ng log nÃ y, thÃªm nhá»¯ng thÃ´ng tin nhÆ° thá»i gian, IP, parse dá»¯ liá»‡u tá»« log (server nÃ o, Ä‘á»™ nghiÃªm trá»ng, ná»™i dung log) ra, sau Ä‘Ã³ ghi xuá»‘ng database lÃ  Elasticsearch.<br /></li>
<li>Khi muá»‘n xem log, ngÆ°á»i dÃ¹ng vÃ o URL cá»§a Kibana. Kibana sáº½ Ä‘á»c thÃ´ng tin log trong Elasticsearch, hiá»ƒn thá»‹ lÃªn giao diá»‡n cho ngÆ°á»i dÃ¹ng query vÃ  xá»­ lÃ½.<br />
<img src="https://toidicodedao.files.wordpress.com/2018/02/kibana-log.gif" alt="ELK" /><em>ELK Stack lÃ m viá»‡c</em><br />
<br /></li>
</ol>

<h3 id="táº¡i-sao-pháº£i-dÃ¹ng-elk-stack">Táº¡i sao pháº£i dÃ¹ng ELK Stack?</h3>

<p>Vá»›i cÃ¡c há»‡ thá»‘ng hoáº·c á»©ng dá»¥ng nhá», ta khÃ´ng cáº§n sá»­ dá»¥ng ELK stack lÃ m gÃ¬! Cá»© dÃ¹ng thÆ° viá»‡n ghi log Ä‘i kÃ¨m vá»›i ngÃ´n ngá»¯, sau Ä‘Ã³ ghi log ra file rá»“i Ä‘á»c thÃ´i!</p>

<p>Tuy nhiÃªn, vá»›i nhá»¯ng há»‡ thá»‘ng lá»›n nhiá»u ngÆ°á»i dÃ¹ng, cÃ³ nhiá»u service phÃ¢n tÃ¡n (microservice), cÃ³ nhiá»u server cháº¡y cÃ¹ng lÃºcâ€¦ thÃ¬ viá»‡c ghi log xuá»‘ng file khÃ´ng cÃ²n hiá»‡u quáº£ ná»¯a.</p>

<p>Giáº£ sá»­ báº¡n cÃ³ 10 con server cháº¡y cÃ¹ng lÃºc, báº¡n sáº½ pháº£i lá»¥c tung 10 con server nÃ y Ä‘á»ƒ Ä‘á»c vÃ  tÃ¬m file log, cá»±c quÃ¡ pháº£i khÃ´ng nÃ o? LÃºc nÃ y, ngÆ°á»i ta báº¯t Ä‘áº§u Ã¡p dá»¥ng centralized logging, tá»©c ghi log táº­p trung vÃ o 1 chá»—.</p>

<h3 id="elk-stack-Æ°">ELK Stack Æ°? ğŸ‘ğŸ»</h3>

<p>VÃ¬ Ä‘Ã¢u mÃ  mÃ  ELK Stack láº¡i vÃ´ cÃ¹ng máº¡nh máº½, tiá»‡n dÃ¹ng, Ä‘Æ°á»£c nhiá»u cÃ´ng ty sá»­ dá»¥ng nhÆ° váº­y? VÃ¬ cÃ¡c lÃ½ do sau:</p>

<ul>
<li>Äá»c log tá»« nhiá»u nguá»“n: Logstash cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c log tá»« ráº¥t nhiá»u nguá»“n, tá»« log file cho Ä‘áº¿n log database cho Ä‘áº¿n UDP hay REST request.<br /></li>
<li>Dá»… tÃ­ch há»£p: DÃ¹ báº¡n cÃ³ dÃ¹ng Nginx hay Apache, dÃ¹ng MSSQL, MongoDB hay Redis, Logstash Ä‘á»u cÃ³ thá»ƒ Ä‘á»c hiá»ƒu vÃ  xá»­ lÃ½ log cá»§a báº¡n nÃªn viá»‡c tÃ­ch há»£p ráº¥t dá»… dÃ ng.<br /></li>
<li>HoÃ n toÃ n free: Chá»‰ cáº§n táº£i vá», setup vÃ  dÃ¹ng, khÃ´ng tá»‘n má»™t Ä‘á»“ng nÃ o cáº£. CÃ´ng ty táº¡o ra ELK Stack kiáº¿m tiá»n báº±ng cÃ¡c dá»‹ch vá»¥ cloud hoáº·c cÃ¡c sáº£n pháº©m premium phá»¥ thÃªm.<br /></li>
<li>Kháº£ nÄƒng scale tá»‘t: Logstash vÃ  Elasticsearch cháº¡y trÃªn nhiá»u node nÃªn há»‡ thá»‘ng ELK cá»±c kÃ¬ dá»… scale. Khi cÃ³ thÃªm service, thÃªm ngÆ°á»i dÃ¹ng, muá»‘n log nhiá»u hÆ¡n, báº¡n chá»‰ viá»‡c thÃªm node cho Logstash vÃ  Elasticsearch lÃ  xong.<br /></li>
<li>Search vÃ  filter máº¡nh máº½: Elasticsearch cho phÃ©p lÆ°u trá»¯ thÃ´ng tin kiá»ƒu NoSQL, há»— trá»£ luÃ´n Full-Text Search nÃªn viá»‡c query ráº¥t dá»… dÃ ng vÃ  máº¡nh máº½.<br />
Cá»™ng Ä‘á»“ng máº¡nh, tutorial nhiá»u: Nhiá»u cÃ´ng ty dÃ¹ng nÃªn dÄ© nhiÃªn lÃ  cÃ³ nhiá»u tutorial Ä‘á»ƒ há»c vÃ  dÃ¹ng ELK Stack rá»“i.<br />
<br /></li>
</ul>

<h3 id="á»©ng-dá»¥ng-ra-sao">á»¨ng dá»¥ng ra sao?</h3>

<p>TrÆ°á»›c Ä‘Ã¢y, há»‡ thá»‘ng cá»§a bÃªn mÃ¬nh gáº·p pháº£i váº¥n Ä‘á» vá» logging:</p>

<ul>
<li>Há»‡ thá»‘ng back-end xÃ¢y dá»±ng theo mÃ´ hÃ¬nh <strong><a href="https://biendinh199x.github.io/blog/post/postpage3_finish_week_1/">microservice</a></strong>. MÃ¬nh cÅ©ng Ä‘Ã£ cÃ³ má»™t bÃ i viáº¿t vá» microservice, cÃ¡c báº¡n Ä‘á»c qua á»Ÿ <strong><a href="https://biendinh199x.github.io/blog/post/postpage3_finish_week_1/">microservice</a></strong>. Má»—i <strong><a href="https://biendinh199x.github.io/blog/post/postpage3_finish_week_1/">microservice</a></strong> Ä‘Æ°á»£c deploy thÃ nh má»™t AppService trÃªn Azure. Má»—i khi service cÃ³ váº¥n Ä‘á», cáº§n Ä‘á»c log thÃ¬ pháº£i vÃ o Azure, tÃ¬m service Ä‘Ã³, tÃ¬m trong folder deploy Ä‘á»ƒ tÃ¬m file log.<br /></li>
<li>Má»™t app Desktop khÃ¡c do mÃ¬nh viáº¿t báº±ng Electron, cáº§n cháº¡y trÃªn 100 mÃ¡y áº£o cá»§a khoáº£ng 100 users. Má»—i khi app cÃ³ váº¥n Ä‘á» gÃ¬ thÃ¬ pháº£i login vÃ o mÃ¡y áº£o Ä‘Ã³ vÃ  tÃ¬m file log.<br /></li>

<li><p>Khi cáº§n tÃ¬m vÃ  fix bug, ta cáº§n pháº£i mÃ² vÃ  Ä‘á»c file log Ä‘á»ƒ â€œÄ‘iá»u traâ€ xem lá»—i náº±m á»Ÿ Ä‘Ã¢u.<br />
Do váº­y, bÃªn mÃ¬nh quyáº¿t Ä‘á»‹nh sá»­ dá»¥ng ELK Stack Ä‘á»ƒ chá»©a toÃ n bá»™ log cá»§a há»‡ thá»‘ng. Viá»‡c tÃ­ch há»£p Ä‘Æ¡n giáº£n tá»›i khÃ´ng ngá», chá»‰ máº¥t khoáº£ng 1 ngÃ y:</p></li>

<li><p>Thay vÃ¬ kiáº¿m server vÃ  cÃ i Ä‘áº·t ELK Stack, CTO quyáº¿t Ä‘á»‹nh dÃ¹ng service cá»§a logit.io. Tháº±ng nÃ y host sáºµn ELK Stack trÃªn cloud, khá»i cáº§n mÃ¬nh tá»‘n cÃ´ng quáº£n lÃ½.</p></li>

<li><p>MÃ¬nh config Logstash cho phÃ©p ghi log thÃ´ng qua giao thá»©c UDP.</p></li>

<li><p>CÃ¡c service phÃ­a back-end Ä‘Ã£ dÃ¹ng log4net sáºµn, do váº­y mÃ¬nh khÃ´ng cáº§n sá»­a code nhiá»u, chá»‰ config cho log4net ghi thÃªm log qua giao thá»©c UDP, gá»­i tá»›i logstash lÃ  Ä‘Æ°á»£c.</p></li>

<li><p>App Desktop cá»§a mÃ¬nh thÃ¬ sá»­a láº¡i má»™t chÃºt, lÃºc ghi log thÃ¬ ghi xuá»‘ng cáº£ file láº«n gá»­i log theo giao thá»©c UDP.</p></li>
</ul>

<p>Sau má»™t ngÃ y hÃ¬ há»¥c, team mÃ¬nh Ä‘Ã£ cÃ³ má»™t há»‡ thá»‘ng centralized logging vá»›i ELK Stack. Chá»‰ cáº§n truy cáº­p vÃ o Kibana lÃ  cÃ³ thá»ƒ biáº¿t há»‡ thá»‘ng Ä‘ang hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o.<br />
<img src="https://pbs.twimg.com/media/DRba8eAXUAMLFlO.jpg" alt="ELK" /><em>NhÃ¬n cháº¥t nhÆ° nÆ°á»›c cáº¥t</em> ğŸ˜</p>

<p>Khi cÃ³ váº¥n Ä‘á», thay vÃ¬ lá»¥c file log, mÃ¬nh chá»‰ cáº§n dÃ¹ng Kibana Ä‘á»ƒ lá»c ra nhá»¯ng log trong khoáº£ng thá»i gian Ä‘Ã³, sau Ä‘Ã³ filter tÃ­ lÃ  ra, tiáº¿t kiá»‡m Ä‘Æ°á»£c ráº¥t nhiá»u thá»i gian!</p>

<h3 id="mÃ¬nh-má»›i-tiá»m-hiá»ƒu-vÃ -cÅ©ng-chÆ°a-lÃ m-chá»§-Ä‘Æ°á»£c-nÃ³-láº¯m-elk-stack-nÃ y-ráº¥t-máº¡nh-lÃªn-sau-khi-lÃ m-chá»§-Ä‘Æ°á»£c-cÃ¡c-tÃ­nh-nÄƒng-mÃ¬nh-sáº½-viáº¿t-1-bÃ i-khÃ¡c-cho-cÃ¡c-báº¡n">MÃ¬nh má»›i tiá»m hiá»ƒu vÃ  cÅ©ng chÆ°a lÃ m chá»§ Ä‘Æ°á»£c nÃ³ láº¯m. ELK stack nÃ y ráº¥t máº¡nh lÃªn sau khi lÃ m chá»§ Ä‘Æ°á»£c cÃ¡c tÃ­nh nÄƒng mÃ¬nh sáº½ viáº¿t 1 bÃ i khÃ¡c cho cÃ¡c báº¡n!</h3>

<h3 id="thÃ¢n-Ã¡i-peaceee">ThÃ¢n Ã¡i!!! Peaceee!!!!!!!!ğŸ˜</h3>

<p><img src="https://media.giphy.com/media/l3V0gpbjA6fD7ym9W/giphy.gif" alt="ELK" /></p>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        
        <div class="pagination__buttons">
          
          
            <span class="button next">
              <a href="https://biendinh199x.github.io/blog/post/postpage7_travel_hoian/">
                <span class="button__text">Kinh nghiá»‡m du lá»‹ch Há»™i An 2019 vá»›i 22 USD</span>
                <span class="button__icon">â†’</span>
              </a>
            </span>
          
        </div>
      </div>
    

    <div class="comment">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "blog-bee" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "https://biendinh199x.github.io/blog/")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'blog-bee';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
  
    </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">Create at BumbleBeeğŸ</div>
    
  </div>
</footer>

<script src="https://biendinh199x.github.io/blog/assets/main.js"></script>
<script src="https://biendinh199x.github.io/blog/assets/prism.js"></script>

  
</div>

</body>
</html>
